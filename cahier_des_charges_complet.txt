================================================================================
CAHIER DES CHARGES COMPLET
PLATEFORME D'AUTO-DIAGNOSTIC CYBERS√âCURIT√â POUR PME
================================================================================

Version : 1.0
Date : 04 f√©vrier 2026
Commanditaires : Acham (consultant cybers√©curit√©), David Dolama
Technologie : Laravel (PHP) + Vue.js + PostgreSQL/MySQL


================================================================================
1. CONTEXTE & OBJECTIFS BUSINESS
================================================================================

PROBL√àME IDENTIFI√â
------------------
- Faible sensibilisation des PME aux risques cyber & au r√¥le du pentest
- D√©cisions retard√©es faute d'un diagnostic clair, chiffr√© et orient√© "business"
- Difficult√© √† qualifier les leads pour les consultants cybers√©curit√©

SOLUTION PROPOS√âE
-----------------
Plateforme web permettant de :
1. Remplir un questionnaire d'auto-diagnostic (5-20 min selon le niveau)
2. G√©n√©rer automatiquement un rapport ex√©cutif (PDF + page web) via IA
3. Proposer un cr√©neau de visio avec un consultant pour passer √† l'action

CIBLES UTILISATEURS
-------------------
- Dirigeants/Executives de PME : CEO, COO, DAF, DSI
- Zones g√©ographiques : France, UE, Canada, Togo
- Secteurs : Finance, Sant√©, Services, Industrie

KPIs CIBLES (MVP)
-----------------
- ‚â• 40% taux de compl√©tion du questionnaire
- ‚â• 30% conversion rapport ‚Üí prise de rendez-vous
- < 5 minutes : d√©lai "premi√®re valeur" (formulaire ‚Üí rapport)
- < 60 secondes : g√©n√©ration du rapport (p95)


================================================================================
2. ARCHITECTURE √Ä 2 NIVEAUX (INNOVATION vs CAHIER INITIAL)
================================================================================

NIVEAU 1 : DIAGNOSTIC EXPRESS (5 minutes)
------------------------------------------
Cible : CEO, DAF, COO (profils non-techniques)
Questions : 6 questions strat√©giques orient√©es business
Format : QCM + champs texte optionnels
Sortie : Rapport ex√©cutif light (2 pages) + score global + CTA fort

Questions Express :
1. Quel est l'objectif m√©tier principal de la solution ?
   ‚Üí Aide : Comprendre ce qu'il faut absolument prot√©ger
   ‚Üí Exemples : Finance, Sant√©, Services, Industrie

2. Quels types de donn√©es sont support√©es par cette solution ?
   ‚Üí Aide : D√©termine le niveau de protection requis
   ‚Üí Options : Aucune sensible / Personnelles / Financi√®res / Sant√© / IP

3. H√©bergement : sur vos infrastructures, cloud ou hybride ?
   ‚Üí Aide : Identifier les responsabilit√©s et menaces sp√©cifiques
   ‚Üí Options : On-prem / Cloud public / Cloud priv√© / Hybride

4. Quels partenaires/fournisseurs tiers ont acc√®s aux donn√©es ?
   ‚Üí Aide : Int√©grer les risques li√©s aux tiers
   ‚Üí Exemples : PSP paiement, API messagerie, SSO, e-signature

5. Obligations r√©glementaires ou contractuelles ?
   ‚Üí Aide : Cibler les sc√©narios li√©s √† la conformit√©
   ‚Üí Options : RGPD / PCI-DSS / HIPAA / HDS / ISO 27001

6. Impacts les plus critiques en cas d'incident ?
   ‚Üí Aide : Prioriser les sc√©narios selon la gravit√©
   ‚Üí Options : Perte financi√®re / R√©putation / P√©nalit√©s / Interruption / Perte IP


NIVEAU 2 : AUTO-DIAGNOSTIC D√âTAILL√â (15-20 minutes)
----------------------------------------------------
Cible : DSI, RSSI, Responsables IT (profils techniques)
Questions : 8 sections avec sous-questions et d√©pendances
Format : Mindmap interactive avec tooltips explicatifs
Sortie : Rapport technique complet (6-10 pages) + roadmap + pentest recommand√©

Structure Mindmap (8 sections) :

1. SECTEUR D'ACTIVIT√â & TYPE DE SOLUTION
   - Finance / Service / Sant√© / Industrie
   - Web app / Mobile / Infrastructure interne / Cloud SaaS
   ‚Üí D√©pendances : d√©termine les sections sensibles

2. INT√âGRATIONS D'API TIERS
   - Paiement (PSP)
   - Messagerie (email/SMS)
   - Authentification (Google, Facebook, SSO)
   - Autres (visio, e-signature, KYC...)
   ‚Üí D√©pendance : API paiement ‚Üí Donn√©es financi√®res ‚Üí PCI-DSS

3. NOMBRE D'UTILISATEURS
   - < 100
   - 100 - 1 000
   - 1 000 - 10 000
   - > 10 000
   ‚Üí D√©pendance : > 10 000 ‚Üí H√©bergement cloud + scalabilit√©

4. COMPTES ADMINISTRATEURS
   - Oui / Non
   - Si Oui ‚Üí Type d'authentification :
     * 2FA / MFA obligatoire
     * SSO (SAML/OIDC)
     * Hardware (FIDO2)
     * PAM (Privileged Access Management)
   ‚Üí D√©pendance : Admin ‚Üí MFA fortement recommand√©

5. TYPE DE DONN√âES SUPPORT√âES
   - üü¢ Aucune donn√©e sensible
   - üë§ Donn√©es personnelles (RGPD)
   - üí∞ Donn√©es financi√®res
   - üè• Donn√©es de sant√©
   - üîí Propri√©t√© intellectuelle
   ‚Üí D√©pendances multiples : type ‚Üí chiffrement + h√©bergement + conformit√©

6. STOCKAGE DES DONN√âES
   - üîì En clair, sans protection
   - üîê Contr√¥les d'acc√®s simples
   - üîí Chiffrement partiel
   - üõ°Ô∏è Chiffrement syst√©matique (AES-256)
   - ‚òÅÔ∏è H√©bergement cloud certifi√© (ISO 27001, HDS, SOC2)

7. H√âBERGEMENT DE LA SOLUTION
   - üè¢ Infrastructure interne (on-prem)
   - ‚òÅÔ∏è Cloud public (AWS, Azure, GCP)
   - üîÄ Cloud priv√© / hybride
   - ü§ù Prestataire tiers
   ‚Üí D√©pendance : Cloud certifi√© facilite conformit√©

8. OBLIGATIONS R√âGLEMENTAIRES
   - üü¢ Aucune contrainte
   - üá™üá∫ RGPD (donn√©es personnelles UE)
   - üí≥ PCI-DSS (paiements par carte)
   - üè• HIPAA (sant√© US) / HDS (sant√© FR)
   - üè≠ ISO 27001 / IEC 62443 (OT industriel)


GESTION DES D√âPENDANCES (LOGIQUE MINDMAP)
------------------------------------------
Interd√©pendances automatiques :
- Secteur Finance/Sant√© ‚Üí Sugg√®re donn√©es sensibles
- API Paiement ‚Üí Sugg√®re PCI-DSS + chiffrement
- Donn√©es personnelles ‚Üí Sugg√®re RGPD
- > 10 000 utilisateurs ‚Üí Sugg√®re cloud public
- Admin Oui ‚Üí D√©voile section MFA/SSO

D√©tection d'incoh√©rences (Sc√©nario E) :
- Secteur Sant√© + "Aucune donn√©e sensible" ‚Üí ALERTE incoh√©rence
- Correction sugg√©r√©e : Donn√©es personnelles + Donn√©es de sant√©


================================================================================
3. SC√âNARIOS D'USAGE R√âELS
================================================================================

SC√âNARIO A : DG T√©l√©m√©decine (France)
--------------------------------------
Secteur : Sant√© - T√©l√©m√©decine (France + UE)
Solution : Web + Mobile, Cloud PaaS
Int√©grations : Paiement (PSP tokenization), Email/SMS, Visio m√©dicale
Utilisateurs : 1 000 - 10 000 (12 mois)
Admin : Oui (MFA obligatoire + SSO staff)
Donn√©es : Personnelles + Sant√© + IP (aucun PAN stock√©)
Stockage : Chiffrement syst√©matique (KMS/HSM), RBAC, logs immuables
H√©bergement : Cloud public UE, VPC priv√©, WAF/IDS
Conformit√© : RGPD + HDS + PCI-DSS via PSP (SAQ-A)

‚Üí Rapport attendu : Pentest grey-box web/mobile + audit HDS + phishing


SC√âNARIO B : CEO Micro-cr√©dit Digital
--------------------------------------
Secteur : Finance B2C/B2B2C
Solution : Web (back-office) + Mobile client, Cloud PaaS/IaaS
Int√©grations : Paiement, KYC/AML, Email/SMS
Utilisateurs : 10 000 - 50 000 (18 mois)
Admin : Oui (MFA + SSO, r√¥les s√©par√©s)
Donn√©es : Personnelles + Financi√®res (scores, IBAN tokenis√©) + IP
Stockage : Chiffrement syst√©matique, data masking, vault, logs sign√©s
H√©bergement : Cloud public UE, WAF, rate limiting, SIEM
Conformit√© : RGPD + PCI-DSS (SAQ-A) + LBC/FT (KYC)

‚Üí Rapport attendu : Pentest applicatif + OWASP Top 10 + audit scoring


SC√âNARIO C : COO SaaS B2B LegalTech
------------------------------------
Secteur : Services B2B - Contract management
Solution : Web app + int√©grations bureautiques, Cloud SaaS
Int√©grations : SSO SAML/OIDC, Email transactionnel, e-signature
Utilisateurs : 1 000 - 10 000 (multi-tenants)
Admin : Oui (MFA par d√©faut, SSO enterprise, RBAC strict)
Donn√©es : Personnelles + IP (contrats, clauses)
Stockage : Chiffrement syst√©matique, isolation tenant, DLP, sauvegardes
H√©bergement : Cloud public UE, WAF, CSP, monitoring CIS
Conformit√© : RGPD (DPA, minimisation) + eIDAS (e-signature)

‚Üí Rapport attendu : Pentest isolation multi-tenant + revue DPA


SC√âNARIO D : CTO Industrie (On-prem + OT)
------------------------------------------
Secteur : Industrie - Production IT/OT
Solution : Web interne + Infrastructure on-prem critique
Int√©grations : SMTP relai interne, SSO AD/IdP (aucun paiement)
Utilisateurs : 100 - 1 000 (multi-usines)
Admin : Oui (MFA hardware FIDO2, bastion, PAM)
Donn√©es : Personnelles RH + IP (plans) + m√©ta-donn√©es prod
Stockage : Chiffrement syst√©matique, segmentation IT/OT, PRA 3-2-1
H√©bergement : On-prem (OT) + Cloud priv√©/hybride (IT), IDS/IPS, SIEM
Conformit√© : RGPD + ISO 27001 / IEC 62443 (objectif certification)

‚Üí Rapport attendu : Pentest infra + audit segmentation IT/OT + PRA


SC√âNARIO E : D√©tection d'incoh√©rences
--------------------------------------
Secteur : Sant√© - Dossiers patients
Solution : Web + Mobile, Cloud public
R√©ponse initiale erron√©e : "Aucune donn√©e sensible"
‚Üí ALERTE SYST√àME : Incoh√©rence d√©tect√©e !
‚Üí Correction sugg√©r√©e : Donn√©es personnelles + Donn√©es de sant√©
‚Üí Obligations : RGPD + HDS + PCI-DSS (PSP)


================================================================================
4. FONCTIONNALIT√âS D√âTAILL√âES
================================================================================

4.1 FORMULAIRE D'AUTO-DIAGNOSTIC
---------------------------------
Structure :
- 10 sections (cahier initial) OU 8 sections (mindmap) selon niveau
- Progression : barre visuelle + estimation temps restant
- Sauvegarde auto : toutes les 30 secondes
- Reprise : lien magique (email OTP) si abandon
- Consentement RGPD : explicite avant soumission

Sections d√©taill√©es (Niveau 2 complet - 10 sections) :
1. Profil & contexte : secteur, taille, pays, cloud, r√©gulations
2. Gouvernance & politiques : responsable cyber, chartes, audits
3. Identit√©s & acc√®s : MFA, SSO, droits, comptes privil√©gi√©s
4. Postes & mobiles : MDM/EDR, patching, chiffrement, BYOD
5. Sauvegardes & PRA : 3-2-1, tests restauration, RPO/RTO
6. Messagerie & phishing : SPF/DKIM/DMARC, sensibilisation
7. Applications & web : CI/CD, revues code, WAF, tests
8. R√©seau & p√©rim√®tre : segmentation, VPN, pare-feu, exposition
9. Fournisseurs & SaaS : due diligence, DPA, shadow IT
10. Incidents & conformit√© : plan r√©ponse, logs, DPIA

Exemples de questions granulaires :
- MFA activ√©e pour tous les comptes critiques ? (Oui/Non/Partiel + preuve)
- Sauvegardes chiffr√©es, d√©connect√©es (immutables) avec test trimestriel ?
- DMARC en mode "reject" sur le domaine principal ?
- EDR d√©ploy√© sur ‚â• 90% des postes serveurs/clients ?
- Tests d'intrusion : fr√©quence et p√©rim√®tre (web/app/infras/phishing) ?

Validation :
- Client-side : React Hook Form + Zod
- Server-side : Laravel Form Requests
- Accessibilit√© : WCAG 2.1 AA (clavier, lecteurs d'√©cran)


4.2 MOTEUR DE SCORING & RECOMMANDATIONS
----------------------------------------
Calcul du score :
- Maturit√© par domaine : 0-5 (Initial, G√©r√©, D√©fini, Quantitatif, Optimis√©)
- Score global : 0-100
- Pond√©rations sectorielles : Sant√©/Finance plus strictes

Formule (exemple) :
score_domaine = Œ£(Q_i √ó poids_i_domaine)
score_global = Œ£(domaines √ó poids_domaine)

Poids domaines (exemple) :
- Gouvernance : 15%
- Identit√©s & acc√®s : 20%
- Endpoints : 15%
- Sauvegardes & PRA : 15%
- Messagerie & phishing : 10%
- Applications : 10%
- R√©seau : 10%
- Tiers & SaaS : 5%

Seuils de maturit√© :
- 0-39 : Faible (rouge)
- 40-69 : Moyen (orange)
- 70-84 : Bon (jaune)
- ‚â•85 : Avanc√© (vert)

Carte des risques :
- Probabilit√© √ó Impact ‚Üí Cat√©gories : Tr√®s √©lev√© / √âlev√© / Mod√©r√© / Faible
- Heatmap visuelle dans le rapport

Recommandations prioris√©es :
- Horizon : 0-30j (Quick wins) / 30-90j / 3-6 mois
- Effort : S / M / L
- Impact : S / M / L
- Co√ªt : ‚Ç¨ / ‚Ç¨‚Ç¨ / ‚Ç¨‚Ç¨‚Ç¨ (fourchettes indicatives)

Recommandation pentest (g√©n√©r√©e par r√®gles) :
- Type : Web/Mobile/Infra/Cloud/Ing√©nierie sociale
- Mode : Black-box / Grey-box / White-box
- Dur√©e estim√©e : 3-10 jours/homme
- Objectifs : OWASP Top 10, Authn/Authz, Exposition p√©rim√®tre
- Pr√©-requis : Environnement de test, comptes d√©di√©s


4.3 IA DE G√âN√âRATION DE RAPPORT
--------------------------------
Architecture :
- API : OpenAI GPT-4 (ou √©quivalent) appel√© c√¥t√© serveur
- Temp√©rature : Basse (0.2-0.3) pour coh√©rence
- Prompts : Versionn√©s dans DB, logs de justifications

Entr√©es IA :
- R√©ponses normalis√©es (JSON)
- Score global + scores par domaine
- M√©tadonn√©es : secteur, taille, pays, r√©gulations
- Sc√©nario similaire (si match)

Sortie IA (JSON structur√©) :
{
  "org_profile": {
    "sector": "sant√©",
    "size": 150,
    "region": "FR"
  },
  "scores": [
    {"domain": "Identit√©s", "score": 62, "maturity": 2}
  ],
  "top_risks": [
    {
      "title": "Absence MFA email",
      "severity": "high",
      "rationale": "r√©ponses Q3,Q4",
      "recommended_actions": [
        {
          "action": "Activer MFA pour tous",
          "impact": "high",
          "effort": "medium",
          "horizon": "0-30j",
          "cost_range": "‚Ç¨‚Ç¨"
        }
      ]
    }
  ],
  "pentest_reco": {
    "type": ["web","infra"],
    "mode": "grey-box",
    "est_duration_days": 5,
    "objectives": ["authn/authz","OWASP Top 10","exposition p√©rim√®tre"],
    "prereqs": ["environnement de test", "comptes d√©di√©s"]
  },
  "executive_summary": "3-5 points cl√©s orient√©s DG",
  "roadmap": [
    {"horizon": "0-30j", "items": ["MFA", "DMARC reject", "sauvegardes test"]}
  ]
}

Garde-fous IA :
- Ne doit PAS affirmer des vuln√©rabilit√©s non observ√©es
- Extrapole seulement des risques plausibles
- Ton : p√©dagogique, non alarmiste, orient√© business
- Validation sch√©ma JSON stricte

Performance :
- G√©n√©ration < 60s dans 95% des cas
- Retry automatique en cas d'√©chec
- Fallback : rapport template si IA indisponible


4.4 G√âN√âRATION PDF & PARTAGE
-----------------------------
Package Laravel : barryvdh/laravel-dompdf ou spatie/laravel-pdf

Gabarit PDF (2 versions) :

Version Express (2 pages) :
1. R√©sum√© ex√©cutif (score global + cat√©gorie risque)
2. Top 3 quick wins avec co√ªt/effort
3. CTA : "R√©server un √©change avec un expert"

Version D√©taill√©e (6-10 pages) :
1. R√©sum√© ex√©cutif (1 page)
2. Score global & par domaine + benchmark secteur
3. Carte des risques (heatmap)
4. Quick wins 0-30j (checklist)
5. Roadmap 30-90j / 3-6 mois (tableau)
6. Recommandation pentest (type, objectifs, livrables)
7. Annexes techniques (r√©f√©rences OWASP, CIS, NIST, glossaire)

Sp√©cifications PDF :
- Format : A4
- Taille : < 5 Mo
- Couverture : Logo + infos organisation
- Pied de page : Num√©rotation + date g√©n√©ration
- Watermark : "Auto-diagnostic ‚Äî non contractuel"
- QR code : Lien vers version web s√©curis√©e

Partage s√©curis√© :
- URL tokenis√©e : /reports/{share_token}
- Expiration : 30 jours par d√©faut (configurable)
- Tracking : Ouverture, t√©l√©chargement (analytics)


4.5 R√âSERVATION DE RENDEZ-VOUS
-------------------------------
Int√©grations :
- Cal.com (prioritaire, open-source)
- Calendly (fallback)
- Google Calendar / Outlook (via API)

Fonctionnalit√©s :
- Cr√©neaux dynamiques : fuseau auto-d√©tect√©
- Buffer : 15 min entre RDV
- Dur√©e : 30 ou 45 min (selon offre)
- Lien visio : Google Meet / Zoom auto-g√©n√©r√©
- Calendrier ICS : envoy√© par email

Notifications :
- Email confirmation imm√©diate
- Rappels : J-1 / H-1 (email + SMS optionnel)
- Page reprogrammation : lien dans email
- Webhook : Mise √† jour statut lead dans back-office


4.6 BACK-OFFICE CONSULTANT
---------------------------
Tableau de bord :
- Liste leads avec filtres :
  * Statut : Nouveau / √Ä rappeler / Call planifi√© / Converti / Archiv√©
  * Score : < 40 / 40-69 / 70-84 / ‚â• 85
  * Secteur : Finance, Sant√©, Services, Industrie
  * Date : Derni√®res 24h / 7j / 30j

Fiche lead d√©taill√©e :
- Profil organisation (secteur, taille, pays)
- R√©ponses questionnaire (visualisation)
- Scores & recommandations g√©n√©r√©es
- Rapport PDF t√©l√©chargeable
- Notes internes (consultant)
- Historique interactions (emails, appels)
- Statut pipeline + prochaine action

CMS Admin :
- CRUD questions/sections
- Gestion poids scoring
- √âdition prompts IA (versionn√©s)
- Mod√®les emails (transactionnels)
- Configuration global (d√©lai expiration, seuils)

Exports :
- CSV leads (filtr√©)
- Rapport analytics (conversion, taux compl√©tion)

S√©curit√© back-office :
- RBAC : Consultant (lecture + notes) vs Admin (full access)
- MFA obligatoire
- Journal d'audit : qui a consult√©/modifi√© quoi + timestamp
- Session timeout : 30 min


================================================================================
5. MOD√àLE DE DONN√âES (LARAVEL)
================================================================================

TABLES PRINCIPALES
------------------

organizations
- id (PK)
- name (string)
- sector (enum: finance, sante, services, industrie)
- size (int: nombre d'employ√©s)
- country (string: code ISO)
- created_at, updated_at

respondents (utilisateurs qui remplissent le diag)
- id (PK)
- organization_id (FK)
- email (string, unique)
- role (string: CEO, DAF, DSI, etc.)
- locale (enum: fr, en)
- magic_link_token (string, nullable)
- magic_link_expires_at (timestamp)
- consent_gdpr_at (timestamp, nullable)
- created_at, updated_at

assessments (auto-diagnostics)
- id (PK)
- organization_id (FK)
- respondent_id (FK)
- assessment_level (enum: express, detailed) -- NOUVEAU
- parent_assessment_id (FK nullable) -- Lien Express ‚Üí D√©taill√©
- status (enum: draft, in_progress, submitted, completed)
- started_at (timestamp)
- submitted_at (timestamp, nullable)
- completed_at (timestamp, nullable)
- version (int: version du questionnaire)
- created_at, updated_at

cms_questions (questions configurables)
- id (PK)
- section_id (FK: cms_sections)
- question_text (text)
- help_text (text, nullable)
- help_link (string URL, nullable)
- assessment_level (enum: express, detailed, both)
- answer_type (enum: single_choice, multiple_choice, text, boolean)
- options (json: pour QCM)
- dependencies (json: conditions d'affichage)
- weight (decimal: pour scoring)
- order (int: ordre d'affichage)
- is_active (boolean)
- created_at, updated_at

cms_sections
- id (PK)
- name (string)
- slug (string)
- description (text)
- icon (string: emoji ou class icon)
- order (int)
- assessment_level (enum: express, detailed, both)
- created_at, updated_at

answers (r√©ponses individuelles)
- id (PK)
- assessment_id (FK)
- question_id (FK: cms_questions)
- value (text: pour QCM/boolean)
- custom_value (json: pour r√©ponses textuelles personnalis√©es)
- is_custom (boolean: si r√©ponse hors options)
- evidence_url (string: pi√®ce jointe optionnelle)
- created_at, updated_at

scores (r√©sultats scoring)
- id (PK)
- assessment_id (FK)
- domain (string: nom du domaine)
- score_0_100 (int)
- maturity_0_5 (int)
- weights_version (string: version des r√®gles appliqu√©es)
- created_at, updated_at

recommendations (actions recommand√©es)
- id (PK)
- assessment_id (FK)
- title (string)
- description (text)
- impact (enum: low, medium, high)
- effort (enum: small, medium, large)
- horizon (enum: 0-30j, 30-90j, 3-6mois)
- cost_range (string: ‚Ç¨, ‚Ç¨‚Ç¨, ‚Ç¨‚Ç¨‚Ç¨)
- order (int: priorit√©)
- created_at, updated_at

reports (rapports g√©n√©r√©s)
- id (PK)
- assessment_id (FK)
- json_blob (json: sortie structur√©e de l'IA)
- pdf_url (string: S3/stockage)
- web_url (string: version HTML)
- share_token (string, unique: pour partage s√©curis√©)
- expires_at (timestamp: expiration lien)
- generated_at (timestamp)
- ai_prompt_version (string)
- created_at, updated_at

bookings (rendez-vous)
- id (PK)
- assessment_id (FK)
- consultant_id (FK)
- provider (enum: cal_com, calendly, google)
- provider_booking_id (string: ID externe)
- slot_start (timestamp)
- slot_end (timestamp)
- timezone (string)
- meeting_link (string: lien visio)
- status (enum: scheduled, completed, cancelled, no_show)
- reminder_sent_at (timestamp)
- created_at, updated_at

consultants (√©quipe Acham)
- id (PK)
- user_id (FK: users Laravel)
- name (string)
- email (string)
- calendars (json: URLs Cal.com/Calendly)
- skills (json: secteurs d'expertise)
- is_active (boolean)
- created_at, updated_at

audit_log (tra√ßabilit√© RGPD)
- id (PK)
- actor_id (FK: users)
- action (enum: view, create, update, delete, export)
- entity (string: nom du model)
- entity_id (int)
- changes (json: ancien/nouveau √©tat)
- ip_address (string)
- user_agent (string)
- timestamp (timestamp)

cms_items (contenus √©ditoriaux)
- id (PK)
- type (enum: page, email_template, snippet)
- locale (enum: fr, en)
- slug (string)
- title (string)
- content (text)
- metadata (json)
- is_published (boolean)
- created_at, updated_at


RELATIONS ELOQUENT
------------------
Organization hasMany Assessments
Respondent belongsTo Organization
Assessment belongsTo Organization, Respondent
Assessment hasMany Answers, Scores, Recommendations
Assessment hasOne Report, Booking
Question belongsTo Section
Answer belongsTo Assessment, Question
Report belongsTo Assessment
Booking belongsTo Assessment, Consultant


GLOBAL SCOPES (MULTI-TENANT)
-----------------------------
Models concern√©s : Organization, Assessment, Answer, Score, Report
‚Üí Filtrage automatique par organization_id dans toutes les requ√™tes


================================================================================
6. ARCHITECTURE TECHNIQUE
================================================================================

STACK TECHNOLOGIQUE
--------------------
Backend :
- Framework : Laravel 11+ (PHP 8.2+)
- API : RESTful, versionn√©e (/api/v1/...)
- Auth : Laravel Breeze + Spatie Laravel Permission (RBAC)
- Database : PostgreSQL 15+ ou MySQL 8+
- Queue : Redis (jobs g√©n√©ration PDF/IA)
- Cache : Redis
- Storage : S3-compatible (Scaleway/OVH Object Storage)

Frontend :
- Framework : Inertia.js + Vue.js 3
- Styling : Tailwind CSS 3
- Forms : React Hook Form + Zod (ou VeeValidate)
- Components : Headless UI
- Charts : Chart.js ou Recharts
- Calendar : v-calendar

IA & G√©n√©ration :
- Provider : OpenAI API (GPT-4 Turbo)
- PDF : barryvdh/laravel-dompdf ou spatie/laravel-pdf
- Antivirus : ClamAV (si upload fichiers)

Infrastructure :
- H√©bergement : OVH / Scaleway (r√©gion UE)
- CI/CD : GitHub Actions
- Monitoring : Laravel Telescope + Sentry
- Analytics : Plausible (RGPD-friendly)
- Emails : Mailjet / SendGrid
- SMS : Twilio (optionnel, pour rappels)

S√©curit√© :
- WAF : Cloudflare ou OVH Anti-DDoS
- Secrets : Doppler / AWS Secrets Manager / Laravel Vault
- SAST : CodeQL / Snyk
- DAST : OWASP ZAP


ENDPOINTS API (EXEMPLES)
-------------------------
POST   /api/v1/assessments
  ‚Üí Cr√©er un assessment (email, org, locale, level)
  ‚Üí Retour : assessment_id + magic_link

PUT    /api/v1/assessments/{id}/answers
  ‚Üí Enregistrer/valider un lot de r√©ponses
  ‚Üí Validation server-side

POST   /api/v1/assessments/{id}/score
  ‚Üí Calculer les scores (moteur r√®gles)
  ‚Üí Retour : scores par domaine + global

POST   /api/v1/assessments/{id}/report
  ‚Üí G√©n√®re rapport via IA (job asynchrone)
  ‚Üí Retour : report_id + estimated_time

GET    /api/v1/reports/{id}
  ‚Üí R√©cup√®re JSON + PDF URL

POST   /api/v1/reports/{id}/share
  ‚Üí Cr√©e lien partage tokenis√©
  ‚Üí Retour : share_url + expires_at

POST   /api/v1/bookings
  ‚Üí Cr√©er r√©servation (assessment_id, slot, timezone)
  ‚Üí Webhook vers Cal.com/Calendly

GET    /api/v1/admin/leads (auth)
  ‚Üí Liste leads avec filtres (statut, score, secteur)

GET    /api/v1/admin/leads/{id} (auth)
  ‚Üí Fiche lead d√©taill√©e

PATCH  /api/v1/admin/leads/{id}/notes (auth)
  ‚Üí Ajouter notes internes

Webhooks :
POST   /webhooks/cal (cr√©ation/annulation RDV)
POST   /webhooks/mail (ouverture/clic emails)
POST   /webhooks/pdf (succ√®s/erreur g√©n√©ration)


S√âCURIT√â BY DESIGN
------------------
Menaces STRIDE & contre-mesures :

Spoofing :
- SSO/MFA pour back-office
- DKIM/DMARC sur emails sortants
- Validation stricte tokens (magic link, share)

Tampering :
- JWT RS256 (si API tokens)
- Int√©grit√© PDF (checksum)
- Stockage rapports : WORM (Write Once Read Many)

Repudiation :
- Audit logs immuables (append-only)
- Horodatage certifi√©

Information Disclosure :
- Chiffrement au repos : AES-256 (DB encryption at rest)
- Chiffrement en transit : TLS 1.3, HSTS
- Masquage PII dans logs
- VPC priv√©s

Denial of Service :
- Rate limiting : 100 req/h par IP
- WAF : protection DDoS
- Queue jobs : limiter concurrence IA

Elevation of Privilege :
- RBAC strict (Consultant / Admin)
- Principe du moindre privil√®ge
- Revues d'acc√®s trimestrielles

Conformit√© :
- CSP stricte (Content Security Policy)
- Cookies : HttpOnly, Secure, SameSite=Strict
- CAPTCHA : Google reCAPTCHA v3 (formulaires)
- OWASP ASVS L2 minimum


RGPD & CONFIDENTIALIT√â
----------------------
Base l√©gale :
- Int√©r√™t l√©gitime (B2B leads) + Consentement explicite

DPIA :
- R√©alis√©e et valid√©e avant GO-LIVE
- Mise √† jour annuelle

DPA (Data Processing Agreements) :
- H√©bergeur (OVH/Scaleway)
- Email (Mailjet/SendGrid)
- Calendrier (Cal.com/Google)
- IA (OpenAI)

Minimisation :
- Collecter uniquement donn√©es n√©cessaires
- Pas de tracking publicitaire

Dur√©e de conservation :
- Par d√©faut : 180 jours apr√®s dernier contact
- Purge automatique (scheduled job)
- Export/suppression sur demande (droits RGPD)

Droits des personnes :
- Acc√®s : export JSON/PDF des donn√©es
- Rectification : formulaire d√©di√©
- Suppression : soft delete + purge d√©finitive apr√®s 30j
- Portabilit√© : export machine-readable

Logs d'acc√®s :
- Qui a consult√© quelle fiche lead + timestamp
- Conserv√©s 1 an (obligation l√©gale)


================================================================================
7. INTERNATIONALISATION (i18n)
================================================================================

LANGUES SUPPORT√âES (MVP)
------------------------
- Fran√ßais (fr) : langue par d√©faut
- Anglais (en)

√âL√âMENTS TRADUITS
-----------------
- Interface UI (labels, boutons, messages)
- Questions & sections du questionnaire
- Emails transactionnels
- Rapports PDF/HTML
- Aide contextuelle (tooltips)

STRUCTURE FICHIERS
------------------
Laravel lang/fr.json
Laravel lang/en.json

D√©tection locale :
1. Param√®tre URL (?locale=en)
2. Pr√©f√©rence utilisateur (si compte)
3. Header Accept-Language navigateur
4. D√©faut : fr


================================================================================
8. CONTENUS & COMMUNICATION
================================================================================

PAGES LANDING (PUBLIC)
-----------------------
1. Accueil :
   - Hero : "En 10 minutes, obtenez un rapport clair sur vos risques cyber"
   - B√©n√©fices : Gain de temps, Vision claire, Plan d'action prioris√©
   - Preuves sociales : Logos partenaires, t√©moignages anonymis√©s
   - CTA : "D√©marrer l'auto-diagnostic"

2. Pourquoi le pentest :
   - D√©finition vulgaris√©e
   - Diff√©rence audit/pentest
   - ROI d'un pentest
   - Cas d'usage sectoriels

3. Comment √ßa marche :
   - 3 √©tapes : Questionnaire ‚Üí Rapport ‚Üí Rendez-vous
   - Timeline visuelle
   - Capture d'√©cran rapport

4. L'auto-diag :
   - Dur√©e : 5-20 min selon niveau
   - 100% gratuit
   - Aucun engagement
   - Donn√©es s√©curis√©es (RGPD)

5. √Ä propos :
   - Pr√©sentation Acham
   - Expertise & certifications
   - Contact

6. Blog/Ressources (optionnel V2) :
   - Articles p√©dagogiques
   - Guides t√©l√©chargeables
   - Webinaires


TON √âDITORIAL
-------------
- P√©dagogique : expliquer sans jargon
- Orient√© valeur : focus b√©n√©fices business, pas technique
- Non alarmiste : √©viter la peur, privil√©gier les priorit√©s actionnables
- Transparent : "Auto-diagnostic ‚Äî non contractuel"


EMAILS TRANSACTIONNELS
-----------------------
1. Confirmation d√©marrage assessment :
   - Lien magique de reprise
   - Estimation temps restant
   - Expiration : 7 jours

2. Rapport pr√™t :
   - Lien t√©l√©chargement PDF
   - Lien partage web s√©curis√©
   - CTA : "R√©server un √©change"

3. Confirmation RDV :
   - D√©tails (date, heure, fuseau)
   - Lien visio
   - ICS joint
   - Pr√©parer : liste questions √† aborder

4. Rappel RDV J-1 :
   - Confirmation pr√©sence
   - Lien reprogrammation

5. Rappel RDV H-1 :
   - Lien visio (r√©p√©t√©)
   - "On vous attend dans 1h"


================================================================================
9. PLAN PROJET (14 SEMAINES)
================================================================================

SEMAINE 1 : Cadrage & Architecture
-----------------------------------
Livrables :
- Audit complet codebase MediCare
- Architecture Decision Record (ADR) : 2 niveaux vs 1 niveau
- Maquettes Figma (wireframes low-fi)
- Sch√©ma questionnaires finalis√© (Express 6Q + D√©taill√© 8 sections)

SEMAINES 2-3 : Fondations Backend
----------------------------------
Livrables :
- Migrations DB compl√®tes (15 tables)
- Models Eloquent + Relations
- Global Scopes multi-tenant
- Seeders :
  * 6 questions Express
  * 8 sections + sous-questions D√©taill√©es
  * 2 consultants demo
  * 5 sc√©narios tests (A-E)
- Tests unitaires models

SEMAINE 4 : Questionnaire Express
----------------------------------
Livrables :
- API endpoints (POST /assessments, PUT /answers)
- Validation Form Requests
- Frontend Vue : formulaire 6 questions
- Composant QuestionCard avec tooltips
- Sauvegarde auto + magic link
- Tests E2E (Cypress/Pest)

SEMAINES 5-6 : Questionnaire D√©taill√© & Mindmap
------------------------------------------------
Livrables :
- 8 sections + d√©pendances (JSON rules)
- Composant MindmapStepper.vue (r√©utilisation HTML existant)
- Logique interd√©pendances :
  * Finance ‚Üí Donn√©es sensibles
  * Paiement ‚Üí PCI-DSS
  * Admin ‚Üí MFA sugg√©r√©
- D√©tection incoh√©rences (Sc√©nario E)
- Barre progression dynamique

SEMAINE 7 : Moteur de Scoring
------------------------------
Livrables :
- Service ScoringEngine.php
- Calcul scores Express vs D√©taill√©
- Pond√©rations sectorielles (finance, sant√©, services, industrie)
- Carte des risques (probabilit√© √ó impact)
- Recommandations prioris√©es (horizon, effort, co√ªt)
- Tests unitaires (100% coverage scoring)

SEMAINES 8-9 : IA & G√©n√©ration Rapports
----------------------------------------
Livrables :
- Service ReportGenerator.php
- 2 prompts versionn√©s :
  * Prompt Express (rapport 2 pages)
  * Prompt D√©taill√© (rapport 6-10 pages)
- Int√©gration OpenAI API (temperature 0.3)
- Validation sch√©ma JSON sortie
- Job asynchrone (queue Redis)
- Gestion erreurs + retry logic
- Tests : mocks API IA

SEMAINE 10 : PDF & Partage
---------------------------
Livrables :
- 2 templates Blade PDF :
  * Template Express (2 pages)
  * Template D√©taill√© (6-10 pages)
- G√©n√©ration PDF (spatie/laravel-pdf)
- Watermark "Auto-diagnostic ‚Äî non contractuel"
- QR code lien web
- Stockage S3 (OVH Object Storage)
- Lien partage tokenis√© + expiration
- Page web rapport (HTML responsive)

SEMAINE 11 : RDV & Back-office
-------------------------------
Livrables :
- Int√©gration Cal.com (webhooks)
- Composant BookingWidget.vue
- Emails confirmation + rappels (J-1, H-1)
- Back-office admin :
  * Dashboard leads (filtres)
  * Fiche lead d√©taill√©e
  * Notes internes
  * Export CSV
- Journal d'audit (RGPD)

SEMAINE 12 : i18n & S√©curit√©
-----------------------------
Livrables :
- Fichiers lang/fr.json + lang/en.json
- D√©tection locale automatique
- Traduction questionnaires + rapports
- Hardening s√©curit√© :
  * CSP stricte (middleware)
  * Rate limiting (100 req/h)
  * CAPTCHA reCAPTCHA v3
  * Secrets Doppler/Vault
- Scan d√©pendances (Composer audit)
- SAST (CodeQL)

SEMAINE 13 : RGPD & Conformit√©
-------------------------------
Livrables :
- Registre de traitements (CNIL)
- DPA sign√©s (h√©bergeur, email, cal, IA)
- DPIA r√©alis√©e et valid√©e
- Politique conservation (180j + purge auto)
- Droits personnes (export/suppression)
- Banni√®re cookies + consentement
- Mentions l√©gales + CGU

SEMAINE 14 : Tests & GO-LIVE
-----------------------------
Livrables :
- Tests E2E complets (tous parcours)
- Tests accessibilit√© WCAG 2.1 AA
- Pentest externe (3j/h)
- Corrections critiques appliqu√©es
- Beta priv√©e : 10 PME cibles
- Collecte feedback (NPS, taux ach√®vement)
- Documentation exploitation :
  * Guide d√©ploiement
  * Runbook incidents
  * Proc√©dure RGPD (72h CNIL)
- GO-LIVE production


================================================================================
10. MESURE & AM√âLIORATION CONTINUE
================================================================================

KPIs PRODUIT
------------
- Taux d√©marrage diag : visiteurs qui commencent le questionnaire
- Taux compl√©tion Express : % qui terminent les 6 questions
- Taux compl√©tion D√©taill√© : % qui terminent les 8 sections
- Taux abandon par section : identifier friction
- Temps m√©dian compl√©tion : Express vs D√©taill√©
- D√©lai g√©n√©ration rapport : p50, p95, p99
- Taux t√©l√©chargement PDF : % rapports t√©l√©charg√©s
- Taux partage lien : % liens partag√©s
- Conversion rapport ‚Üí RDV : objectif ‚â• 30%
- Taux no-show RDV : objectif < 15%
- NPS rapport : satisfaction utilisateur (0-10)

KPIs BUSINESS
-------------
- Leads g√©n√©r√©s/mois
- Leads qualifi√©s (score < 70) / mois
- Taux conversion call ‚Üí pentest sign√©
- Revenu moyen par lead converti
- CAC (co√ªt acquisition client) vs LTV

ANALYTICS
---------
- Plausible Analytics (RGPD-friendly)
- Consentement cookies obligatoire
- Tracking :
  * Pages vues
  * √âv√©nements : d√©marrage diag, compl√©tion, t√©l√©chargement, RDV
  * Sources trafic : organic, social, email, ads

A/B TESTING (V2)
----------------
Hypoth√®ses √† tester :
- Wording CTA : "D√©marrer" vs "Obtenir mon rapport gratuit"
- Longueur questionnaire : 6Q vs 10Q (Express)
- Ordre sections D√©taill√© : Gouvernance first vs Identit√©s first
- Rapport : PDF seul vs PDF + web
- Incentive RDV : "Audit gratuit 30min" vs "Plan d'action personnalis√©"

BOUCLE FEEDBACK
---------------
- Bouton "Signaler une impr√©cision" dans rapport
- Formulaire satisfaction post-RDV
- Revue trimestrielle :
  * Ajuster poids scoring selon retours terrain
  * Enrichir prompts IA avec nouveaux patterns
  * Ajouter questions √©mergentes (ex: IA g√©n√©rative, supply chain)


================================================================================
11. PRICING & MOD√àLE √âCONOMIQUE
================================================================================

OFFRE GRATUITE (MVP)
--------------------
- Auto-diag Express ou D√©taill√© : illimit√©
- Rapport synth√©tique PDF : 1 g√©n√©ration gratuite
- Partage lien : 30 jours
- Call d√©couverte : 1 RDV 30 min offert

UPSELL (V2)
-----------
Pack D√©couverte (149‚Ç¨ HT) :
- Rapport d√©taill√© enrichi (+ annexes techniques)
- Atelier 1h avec consultant
- Mini plan d'action prioris√© (roadmap 6 mois)

Abonnement Suivi (299‚Ç¨ HT/mois) :
- Auto-diag trimestriel (suivi progression)
- Suivi KPI (dashboard d√©di√©)
- Phishing simulation (1 campagne/trimestre)
- Hotline cyber (2h/mois)

Pack Pentest :
- Sur devis selon p√©rim√®tre
- Livrable : rapport technique + ex√©cutif
- Recommandations prioris√©es
- Retest offert (90j)


================================================================================
12. CHECK-LIST GO-LIVE
================================================================================

CONFORMIT√â RGPD
---------------
‚òê Registre de traitements compl√©t√©
‚òê Base l√©gale d√©finie (int√©r√™t l√©gitime + consentement)
‚òê Mentions d'information (privacy policy)
‚òê DPA sign√©s (4 sous-traitants minimum)
‚òê DPIA r√©alis√©e et valid√©e
‚òê Politique conservation configur√©e (180j)
‚òê Purge automatis√©e test√©e
‚òê Droits personnes impl√©ment√©s (export/suppression)
‚òê Proc√©dure violation donn√©es (72h CNIL)

S√âCURIT√â
--------
‚òê HSTS activ√© (max-age 31536000)
‚òê CSP stricte configur√©e
‚òê Cookies : HttpOnly, Secure, SameSite=Strict
‚òê Rate limiting : 100 req/h
‚òê CAPTCHA op√©rationnel
‚òê Secrets dans vault (pas de .env en prod)
‚òê SCA/SAST/DAST ex√©cut√©s
‚òê Pentest r√©alis√© + correctifs critiques appliqu√©s
‚òê WAF configur√© (Cloudflare/OVH)
‚òê Monitoring op√©rationnel (Sentry)
‚òê Logs centralis√©s (ELK/Vector)

FONCTIONNEL
-----------
‚òê Questionnaire Express test√© (6Q)
‚òê Questionnaire D√©taill√© test√© (8 sections + d√©pendances)
‚òê Scoring valid√© (5 sc√©narios A-E)
‚òê IA g√©n√®re rapports coh√©rents (temp 0.3)
‚òê PDF g√©n√©r√©s < 60s (p95)
‚òê Partage lien tokenis√© fonctionne
‚òê Int√©gration Cal.com op√©rationnelle
‚òê Emails envoy√©s (confirmation, rappels)
‚òê Back-office admin accessible (RBAC)
‚òê i18n FR/EN test√©

PERFORMANCE
-----------
‚òê TTFB < 500ms (p95)
‚òê G√©n√©ration rapport < 60s (p95)
‚òê Uptime cible : 99.5%
‚òê Queue jobs : max 5 concurrent (IA)
‚òê DB index√©e (organization_id, assessment_id)

ACCESSIBILIT√â
-------------
‚òê Navigation clavier 100%
‚òê Lecteurs d'√©cran compatibles
‚òê Contraste WCAG 2.1 AA
‚òê Formulaires labellis√©s


================================================================================
13. RESSOURCES & R√âF√âRENCES
================================================================================

CADRES CYBERS√âCURIT√â
--------------------
- OWASP ASVS 4.0 (Application Security Verification Standard)
- CIS Controls v8 (Center for Internet Security)
- NIST SP 800-53 / 800-115 (Security Controls / Pentest)
- ISO 27001:2022 / 27002:2022
- MITRE ATT&CK (Tactics, Techniques, Procedures)
- ANSSI (guides sectoriels France)

CONFORMIT√â
----------
- RGPD (R√®glement 2016/679)
- PCI-DSS v4.0 (Payment Card Industry)
- HDS (H√©bergement Donn√©es de Sant√© - France)
- HIPAA (Health Insurance Portability - US)
- eIDAS (signature √©lectronique UE)
- IEC 62443 (cybers√©curit√© OT industriel)

OUTILS & PACKAGES
-----------------
Backend Laravel :
- spatie/laravel-permission (RBAC)
- barryvdh/laravel-dompdf (PDF)
- darkaonline/l5-swagger (API doc)
- laravel/telescope (debugging)
- sentry/sentry-laravel (monitoring)

Frontend Vue :
- @inertiajs/vue3
- @headlessui/vue
- @tailwindcss/forms
- vee-validate ou react-hook-form
- chart.js / recharts
- v-calendar

S√©curit√© :
- github/codeql (SAST)
- owasp/zap (DAST)
- snyk (SCA d√©pendances)


================================================================================
14. GLOSSAIRE
================================================================================

2FA/MFA : Authentification multi-facteurs (password + code SMS/app)
ABAC : Attribute-Based Access Control (contr√¥le d'acc√®s par attributs)
CIS : Center for Internet Security (benchmarks s√©curit√©)
CMS : Content Management System (gestion contenus)
CSP : Content Security Policy (en-t√™te s√©curit√© HTTP)
DPA : Data Processing Agreement (accord traitement donn√©es)
DPIA : Data Protection Impact Assessment (analyse impact RGPD)
EDR : Endpoint Detection & Response (s√©curit√© postes)
HSTS : HTTP Strict Transport Security
HSM : Hardware Security Module (module cryptographique mat√©riel)
IDS/IPS : Intrusion Detection/Prevention System
KMS : Key Management Service (gestion cl√©s chiffrement)
KYC/AML : Know Your Customer / Anti Money Laundering
MDM : Mobile Device Management (gestion mobiles)
NPS : Net Promoter Score (satisfaction client)
OT : Operational Technology (syst√®mes industriels)
PAM : Privileged Access Management (gestion comptes admin)
Pentest : Test d'intrusion (ethical hacking)
PRA : Plan de Reprise d'Activit√©
PSP : Payment Service Provider (prestataire paiement)
RBAC : Role-Based Access Control (contr√¥le d'acc√®s par r√¥le)
RPO/RTO : Recovery Point/Time Objective (objectifs PRA)
SAST/DAST : Static/Dynamic Application Security Testing
SIEM : Security Information & Event Management
SOC : Security Operations Center
SSO : Single Sign-On (authentification unique)
WAF : Web Application Firewall
WORM : Write Once Read Many (stockage immuable)


================================================================================
FIN DU CAHIER DES CHARGES
================================================================================

Document maintenu par : David Dolama & Acham
Derni√®re mise √† jour : 04 f√©vrier 2026
Contact : [email/t√©l√©phone consultant]

PROCHAINES √âTAPES :
1. Validation cahier des charges avec commanditaires
2. Choix h√©bergeur (OVH/Scaleway) + ouverture comptes
3. Setup repo GitHub + CI/CD
4. Kickoff d√©veloppement (Semaine 1)

Notes :
- Ce document servira de r√©f√©rence contractuelle pour l'√©quipe dev
- Toute modification majeure n√©cessite validation √©crite
- Les sc√©narios A-E seront utilis√©s pour tests d'acceptance
